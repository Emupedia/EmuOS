import{v as C}from"./variables-055bf2ca.js";import{w as S}from"./index-d050104e.js";const J=()=>typeof globalThis=="object"&&globalThis?globalThis:typeof window=="object"&&window?window:typeof global=="object"&&global?global:typeof self=="object"&&self?self:function(){return this}()||Function("return this")(),M=e=>document.querySelector?document.querySelector(e):e.charAt(0)==="."&&document.getElementsByClassName?document.getElementsByClassName(e.substr(1))[0]:e.charAt(0)!=="."&&e.charAt(0)!=="#"&&document.getElementsByTagName?document.getElementsByTagName(e)[0]:e.charAt(0)==="#"&&document.getElementById?document.getElementById(e.substr(1)):null,Y=e=>document.querySelectorAll?document.querySelectorAll(e):e.charAt(0)==="."&&document.getElementsByClassName?document.getElementsByClassName(e.substr(1)):e.charAt(0)!=="."&&e.charAt(0)!=="#"&&document.getElementsByTagName?document.getElementsByTagName(e):e.charAt(0)==="#"&&document.getElementById?document.getElementById(e.substr(1)):null,z=(e,t)=>{if(e.classList){if(e.classList.contains(t))return!0}else if(e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`)))return!0;return!1},K=(e,t)=>{e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)},Q=(e,t)=>{e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")},X=(e,t)=>{const n=e.getBoundingClientRect(),s=t.getBoundingClientRect();return n.x<s.x+s.width&&n.x+n.width>s.x&&n.y<s.y+s.height&&n.y+n.height>s.y},H=e=>{const t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},O=e=>(e=(e==null?void 0:e.toString())||0,typeof e=="string"&&e!==""&&e!=="max-content"&&e!=="min-content"&&e!=="auto"&&e!=="inherit"&&e!=="initial"&&e!=="revert"&&e!=="revert-layer"&&e!=="unset"&&!e.startsWith("fit-content")&&!e.endsWith("cm")&&!e.endsWith("mm")&&!e.endsWith("Q")&&!e.endsWith("in")&&!e.endsWith("pc")&&!e.endsWith("pt")&&!e.endsWith("px")&&!e.endsWith("em")&&!e.endsWith("ex")&&!e.endsWith("ch")&&!e.endsWith("rem")&&!e.endsWith("lh")&&!e.endsWith("rlh")&&!e.endsWith("vw")&&!e.endsWith("vh")&&!e.endsWith("vmin")&&!e.endsWith("vmax")&&!e.endsWith("vb")&&!e.endsWith("vi")&&!e.endsWith("svw")&&!e.endsWith("svh")&&!e.endsWith("lvw")&&!e.endsWith("lvh")&&!e.endsWith("dvw")&&!e.endsWith("dvh")&&(e+="px"),e),E=(e,t)=>{var n;return parseFloat((n=getComputedStyle(e))==null?void 0:n.getPropertyValue(`--${t}`))},Z=(e,t,n)=>{var s;return(s=e==null?void 0:e.style)==null?void 0:s.setProperty(`--${t}`,O(n))},x=5e3,I=3,U=100,j=e=>new Promise(t=>setTimeout(()=>t(),e)),v=async(e,t={},n)=>{let s=null,i;if(typeof AbortController=="function"){const{timeout:c=x}=t,r=new AbortController;s=setTimeout(()=>r.abort(),c),typeof n=="function"?i=await n(e,{...t,signal:r.signal}):i=await fetch(e,{...t,signal:r.signal})}else typeof n=="function"?i=await n(e,t):i=await fetch(e,t);return s!==null&&clearTimeout(s),i},L=async(e,t={},n,s=I)=>{try{return await v(e,t,n)}catch(i){if(console.error(i),s===1)throw i;return await j(U),L(e,t,n,s-1)}},ee=(e,t)=>L(C.DEV?"https://emuos.emupedia.net/emuos/version.json":"/emuos/version.json",t,e);var p={};(function(e){e.defaults={},e.set=function(t,n,s){var i=s||{},c=e.defaults,r=i.expires||c.expires,l=i.domain||c.domain,f=i.path!==void 0?i.path:c.path!==void 0?c.path:"/",a=i.secure!==void 0?i.secure:c.secure,u=i.httponly!==void 0?i.httponly:c.httponly,d=i.samesite!==void 0?i.samesite:c.samesite,o=r?new Date(typeof r=="number"?new Date().getTime()+r*864e5:r):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(o&&o.getTime()>=0?";expires="+o.toUTCString():"")+(l?";domain="+l:"")+(f?";path="+f:"")+(a?";secure":"")+(u?";httponly":"")+(d?";samesite="+d:"")},e.get=function(t){for(var n=document.cookie.split(";");n.length;){var s=n.pop(),i=s.indexOf("=");i=i<0?s.length:i;var c=decodeURIComponent(s.slice(0,i).replace(/^\s+/,""));if(c===t)return decodeURIComponent(s.slice(i+1))}return null},e.erase=function(t,n){e.set(t,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},e.all=function(){for(var t={},n=document.cookie.split(";");n.length;){var s=n.pop(),i=s.indexOf("=");i=i<0?s.length:i;var c=decodeURIComponent(s.slice(0,i).replace(/^\s+/,""));t[c]=decodeURIComponent(s.slice(i+1))}return t}})(p);const D=e=>{var t;typeof process<"u"&&((t=process.env)==null||t.NODE_ENV)},w=e=>D(),B=e=>typeof e>"u"?"undefined":JSON.stringify(e),y=e=>{if(typeof e!="string")return e;if(e!=="undefined"){if(e!=null)try{return JSON.parse(e)}catch{}return e}};function $(e,t,n){const s=t.getValue(n);return s!==null&&e.set(s),t.addListener&&t.addListener(n,i=>e.set(i)),e.subscribe(i=>t.setValue(n,i)),{...e,delete(){t.deleteValue(n)}}}P();N();G();function A(e,t=!1){const n=[],s=r=>{const l=r.key;r.storageArea===e&&n.filter(({key:f})=>f===l).forEach(({listener:f})=>f(y(r.newValue)))},i=()=>{t&&typeof window<"u"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",s)},c=()=>{t&&typeof window<"u"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",s)};return{addListener(r,l){n.push({key:r,listener:l}),n.length===1&&i()},removeListener(r,l){const f=n.indexOf({key:r,listener:l});f!==-1&&n.splice(f,1),n.length===0&&c()},getValue(r){const l=e.getItem(r);return y(l)},deleteValue(r){e.removeItem(r)},setValue(r,l){e.setItem(r,B(l))}}}function N(e=!1){return typeof window<"u"&&(window==null?void 0:window.localStorage)?A(window.localStorage,e):(w(),b())}function G(e=!1){return typeof window<"u"&&(window==null?void 0:window.sessionStorage)?A(window.sessionStorage,e):(w(),b())}function P(){return typeof document>"u"||typeof(document==null?void 0:document.cookie)!="string"?(w(),b()):{getValue(e){const t=p.get(e);return y(t)},deleteValue(e){p.erase(e,{samesite:"Strict"})},setValue(e,t){p.set(e,B(t),{samesite:"Strict"})}}}function b(){return{getValue(){return null},deleteValue(){},setValue(){}}}const _=`[{
	"name": "My Computer"
} , {
	"name": "Network Neighborhood"
} , {
	"name": "Recycle Bin"
} , {
	"name": "(C)",
	"shortcut": true
} , {
	"name": "Control Panel",
	"shortcut": true
} , {
	"name": "System",
	"shortcut": true
}]`;let T={};try{T=JSON.parse(_)}catch(e){console.error(e)}const R={locale:"en",desktop:{icons:T||[]},settings:{},version:0,user:null,dev:!1};var W;(W=C)!=null&&W.GLOBAL_DEBUG&&console.log(R);const F=$(S(R),N(),"db"),te=e=>{F.update(t=>(typeof e<"u"&&e.length>0&&e.forEach(n=>{t.desktop.icons.forEach(s=>{s.name===n.innerText&&(s.x=E(n,"x")||0,s.y=E(n,"y")||0)})}),t))},ne=(()=>{const{subscribe:e,update:t}=S([]),n={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256},close:"\u2715"};let s=0;const i={};return{subscribe:e,open:(a,u={})=>{const d={target:"default",...a instanceof Object?a:{...u,msg:a}},o=i[d.target]||{},m={...n,...o,...d,theme:{...o.theme,...d.theme},classes:[...o.classes||[],...d.classes||[]],id:d.id||++s};return t(h=>{const g=h.findIndex(V=>V.id===d.id);return g===-1?m.reversed?[...h,m]:[m,...h]:(g>-1&&(h[g]={...h[g],...m}),h)}),s},close:a=>{t(u=>{if(!u.length||a===0)return[];if(a instanceof Object)return u.filter(o=>a(o));const d=a||Math.max(...u.map(o=>o.id));return u.filter(o=>o.id!==d)})},set:(a,u={})=>{const d=a instanceof Object?{...a}:{...u,id:a};t(o=>{const m=o.findIndex(h=>h.id===d.id);return m>-1&&(o[m]={...o[m],...d}),o})},init:(a="default",u={})=>(i[a]=u,i)}})();export{K as a,M as b,Y as c,H as d,E as e,F as f,ee as g,z as h,X as i,O as j,te as k,J as l,T as m,Q as r,Z as s,ne as t};
//# sourceMappingURL=db-c776e8ef.js.map
