import{w as L}from"./index-47084bf0.js";const R=5e3,T=3,C=100,U=e=>new Promise(t=>setTimeout(()=>t(),e)),A=async(e,t={},i)=>{let r=null,n;if(typeof AbortController=="function"){const{timeout:a=R}=t,s=new AbortController;r=setTimeout(()=>s.abort(),a),typeof i=="function"?n=await i(e,{...t,signal:s.signal}):n=await fetch(e,{...t,signal:s.signal})}else typeof i=="function"?n=await i(e,t):n=await fetch(e,t);return r!==null&&clearTimeout(r),n},V=async(e,t={},i,r=T)=>{try{return await A(e,t,i)}catch(n){if(console.error(n),r===1)throw n;return await U(C),V(e,t,i,r-1)}},B=(e,t)=>V("/emuos/version.json",t,e);var g={};(function(e){e.defaults={},e.set=function(t,i,r){var n=r||{},a=e.defaults,s=n.expires||a.expires,u=n.domain||a.domain,f=n.path!==void 0?n.path:a.path!==void 0?a.path:"/",c=n.secure!==void 0?n.secure:a.secure,d=n.httponly!==void 0?n.httponly:a.httponly,l=n.samesite!==void 0?n.samesite:a.samesite,o=s?new Date(typeof s=="number"?new Date().getTime()+s*864e5:s):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+i.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(o&&o.getTime()>=0?";expires="+o.toUTCString():"")+(u?";domain="+u:"")+(f?";path="+f:"")+(c?";secure":"")+(d?";httponly":"")+(l?";samesite="+l:"")},e.get=function(t){for(var i=document.cookie.split(";");i.length;){var r=i.pop(),n=r.indexOf("=");n=n<0?r.length:n;var a=decodeURIComponent(r.slice(0,n).replace(/^\s+/,""));if(a===t)return decodeURIComponent(r.slice(n+1))}return null},e.erase=function(t,i){e.set(t,"",{expires:-1,domain:i&&i.domain,path:i&&i.path,secure:0,httponly:0})},e.all=function(){for(var t={},i=document.cookie.split(";");i.length;){var r=i.pop(),n=r.indexOf("=");n=n<0?r.length:n;var a=decodeURIComponent(r.slice(0,n).replace(/^\s+/,""));t[a]=decodeURIComponent(r.slice(n+1))}return t}})(g);const N=e=>{var t;typeof process<"u"&&((t=process.env)==null||t.NODE_ENV)},v=e=>{N()},b=e=>typeof e>"u"?"undefined":JSON.stringify(e),h=e=>{if(typeof e!="string")return e;if(e!=="undefined"){if(e!=null)try{return JSON.parse(e)}catch{}return e}};function D(e,t,i){const r=t.getValue(i);return r!==null&&e.set(r),t.addListener&&t.addListener(i,n=>{e.set(n)}),e.subscribe(n=>{t.setValue(i,n)}),{...e,delete(){t.deleteValue(i)}}}_();O();I();function S(e,t=!1){const i=[],r=s=>{const u=s.key;s.storageArea===e&&i.filter(({key:f})=>f===u).forEach(({listener:f})=>{f(h(s.newValue))})},n=()=>{t&&typeof window<"u"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",r)},a=()=>{t&&typeof window<"u"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",r)};return{addListener(s,u){i.push({key:s,listener:u}),i.length===1&&n()},removeListener(s,u){const f=i.indexOf({key:s,listener:u});f!==-1&&i.splice(f,1),i.length===0&&a()},getValue(s){const u=e.getItem(s);return h(u)},deleteValue(s){e.removeItem(s)},setValue(s,u){e.setItem(s,b(u))}}}function O(e=!1){return typeof window<"u"&&(window==null?void 0:window.localStorage)?S(window.localStorage,e):(v(),y())}function I(e=!1){return typeof window<"u"&&(window==null?void 0:window.sessionStorage)?S(window.sessionStorage,e):(v(),y())}function _(){return typeof document>"u"||typeof(document==null?void 0:document.cookie)!="string"?(v(),y()):{getValue(e){const t=g.get(e);return h(t)},deleteValue(e){g.erase(e,{samesite:"Strict"})},setValue(e,t){g.set(e,b(t),{samesite:"Strict"})}}}function y(){return{getValue(){return null},deleteValue(){},setValue(){}}}const G=D(L({locale:"en",settings:{},version:0,user:null,dev:!1}),O(),"db"),z=(()=>{const{subscribe:e,update:t}=L([]),i={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256},close:"\u2715"};let r=0;const n={};return{subscribe:e,open:(c,d={})=>{const l={target:"default",...c instanceof Object?c:{...d,msg:c}},o=n[l.target]||{},m={...i,...o,...l,theme:{...o.theme,...l.theme},classes:[...o.classes||[],...l.classes||[]],id:l.id||++r};return t(p=>{const w=p.findIndex(E=>E.id===l.id);return w===-1?m.reversed?[...p,m]:[m,...p]:(w>-1&&(p[w]={...p[w],...m}),p)}),r},close:c=>{t(d=>{if(!d.length||c===0)return[];if(c instanceof Object)return d.filter(o=>c(o));const l=c||Math.max(...d.map(o=>o.id));return d.filter(o=>o.id!==l)})},set:(c,d={})=>{const l=c instanceof Object?{...c}:{...d,id:c};t(o=>{const m=o.findIndex(p=>p.id===l.id);return m>-1&&(o[m]={...o[m],...l}),o})},init:(c="default",d={})=>(n[c]=d,n)}})();export{G as d,B as g,z as t};
