import{w as L}from"./index-d050104e.js";const E=5e3,T=3,N=100,U=e=>new Promise(t=>setTimeout(()=>t(),e)),A=async(e,t={},i)=>{let r=null,n;if(typeof AbortController=="function"){const{timeout:a=E}=t,o=new AbortController;r=setTimeout(()=>o.abort(),a),typeof i=="function"?n=await i(e,{...t,signal:o.signal}):n=await fetch(e,{...t,signal:o.signal})}else typeof i=="function"?n=await i(e,t):n=await fetch(e,t);return r!==null&&clearTimeout(r),n},S=async(e,t={},i,r=T)=>{try{return await A(e,t,i)}catch(n){if(console.error(n),r===1)throw n;return await U(N),S(e,t,i,r-1)}},M=(e,t)=>S("/emuos/version.json",t,e);var w={};(function(e){e.defaults={},e.set=function(t,i,r){var n=r||{},a=e.defaults,o=n.expires||a.expires,u=n.domain||a.domain,f=n.path!==void 0?n.path:a.path!==void 0?a.path:"/",c=n.secure!==void 0?n.secure:a.secure,d=n.httponly!==void 0?n.httponly:a.httponly,l=n.samesite!==void 0?n.samesite:a.samesite,s=o?new Date(typeof o=="number"?new Date().getTime()+o*864e5:o):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+i.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(s&&s.getTime()>=0?";expires="+s.toUTCString():"")+(u?";domain="+u:"")+(f?";path="+f:"")+(c?";secure":"")+(d?";httponly":"")+(l?";samesite="+l:"")},e.get=function(t){for(var i=document.cookie.split(";");i.length;){var r=i.pop(),n=r.indexOf("=");n=n<0?r.length:n;var a=decodeURIComponent(r.slice(0,n).replace(/^\s+/,""));if(a===t)return decodeURIComponent(r.slice(n+1))}return null},e.erase=function(t,i){e.set(t,"",{expires:-1,domain:i&&i.domain,path:i&&i.path,secure:0,httponly:0})},e.all=function(){for(var t={},i=document.cookie.split(";");i.length;){var r=i.pop(),n=r.indexOf("=");n=n<0?r.length:n;var a=decodeURIComponent(r.slice(0,n).replace(/^\s+/,""));t[a]=decodeURIComponent(r.slice(n+1))}return t}})(w);const D=e=>{var t;typeof process<"u"&&((t=process.env)==null||t.NODE_ENV)},v=e=>D(),V=e=>typeof e>"u"?"undefined":JSON.stringify(e),g=e=>{if(typeof e!="string")return e;if(e!=="undefined"){if(e!=null)try{return JSON.parse(e)}catch{}return e}};function B(e,t,i){const r=t.getValue(i);return r!==null&&e.set(r),t.addListener&&t.addListener(i,n=>e.set(n)),e.subscribe(n=>t.setValue(i,n)),{...e,delete(){t.deleteValue(i)}}}_();O();I();function b(e,t=!1){const i=[],r=o=>{const u=o.key;o.storageArea===e&&i.filter(({key:f})=>f===u).forEach(({listener:f})=>f(g(o.newValue)))},n=()=>{t&&typeof window<"u"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",r)},a=()=>{t&&typeof window<"u"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",r)};return{addListener(o,u){i.push({key:o,listener:u}),i.length===1&&n()},removeListener(o,u){const f=i.indexOf({key:o,listener:u});f!==-1&&i.splice(f,1),i.length===0&&a()},getValue(o){const u=e.getItem(o);return g(u)},deleteValue(o){e.removeItem(o)},setValue(o,u){e.setItem(o,V(u))}}}function O(e=!1){return typeof window<"u"&&(window==null?void 0:window.localStorage)?b(window.localStorage,e):(v(),y())}function I(e=!1){return typeof window<"u"&&(window==null?void 0:window.sessionStorage)?b(window.sessionStorage,e):(v(),y())}function _(){return typeof document>"u"||typeof(document==null?void 0:document.cookie)!="string"?(v(),y()):{getValue(e){const t=w.get(e);return g(t)},deleteValue(e){w.erase(e,{samesite:"Strict"})},setValue(e,t){w.set(e,V(t),{samesite:"Strict"})}}}function y(){return{getValue(){return null},deleteValue(){},setValue(){}}}const j=`[{
	"name": "My Computer"
} , {
	"name": "Network Neighborhood"
} , {
	"name": "Recycle Bin"
} , {
	"name": "(C)",
	"shortcut": true
} , {
	"name": "Control Panel",
	"shortcut": true
} , {
	"name": "System",
	"shortcut": true
}]`;let C={};try{C=JSON.parse(j)}catch(e){console.error(e)}const G={locale:"en",desktop:{icons:C},settings:{},version:0,user:null,dev:!1},k=B(L(G),O(),"db"),z=(()=>{const{subscribe:e,update:t}=L([]),i={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256},close:"\u2715"};let r=0;const n={};return{subscribe:e,open:(c,d={})=>{const l={target:"default",...c instanceof Object?c:{...d,msg:c}},s=n[l.target]||{},m={...i,...s,...l,theme:{...s.theme,...l.theme},classes:[...s.classes||[],...l.classes||[]],id:l.id||++r};return t(p=>{const h=p.findIndex(R=>R.id===l.id);return h===-1?m.reversed?[...p,m]:[m,...p]:(h>-1&&(p[h]={...p[h],...m}),p)}),r},close:c=>{t(d=>{if(!d.length||c===0)return[];if(c instanceof Object)return d.filter(s=>c(s));const l=c||Math.max(...d.map(s=>s.id));return d.filter(s=>s.id!==l)})},set:(c,d={})=>{const l=c instanceof Object?{...c}:{...d,id:c};t(s=>{const m=s.findIndex(p=>p.id===l.id);return m>-1&&(s[m]={...s[m],...l}),s})},init:(c="default",d={})=>(n[c]=d,n)}})();export{k as d,M as g,z as t};
