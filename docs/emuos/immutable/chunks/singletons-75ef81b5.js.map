{"version":3,"file":"singletons-75ef81b5.js","sources":["../../../../../../node_modules/@sveltejs/kit/src/runtime/paths.js","../../../../../../node_modules/@sveltejs/kit/src/runtime/client/utils.js","../../../../../../node_modules/@sveltejs/kit/src/runtime/client/singletons.js"],"sourcesContent":["/** @type {string} */\nexport let base = '';\n\n/** @type {string} */\nexport let assets = '';\n\n/** @param {{ base: string, assets: string }} paths */\nexport function set_paths(paths) {\n\tbase = paths.base;\n\tassets = paths.assets || base;\n}\n","import { writable } from 'svelte/store';\nimport { assets } from '../paths.js';\n\n/* global __SVELTEKIT_APP_VERSION__, __SVELTEKIT_APP_VERSION_FILE__, __SVELTEKIT_APP_VERSION_POLL_INTERVAL__ */\n\n/** @param {HTMLDocument} doc */\nexport function get_base_uri(doc) {\n\tlet baseURI = doc.baseURI;\n\n\tif (!baseURI) {\n\t\tconst baseTags = doc.getElementsByTagName('base');\n\t\tbaseURI = baseTags.length ? baseTags[0].href : doc.URL;\n\t}\n\n\treturn baseURI;\n}\n\nexport function scroll_state() {\n\treturn {\n\t\tx: pageXOffset,\n\t\ty: pageYOffset\n\t};\n}\n\n/** @param {Event} event */\nexport function find_anchor(event) {\n\tconst node = event\n\t\t.composedPath()\n\t\t.find((e) => e instanceof Node && e.nodeName.toUpperCase() === 'A'); // SVG <a> elements have a lowercase name\n\treturn /** @type {HTMLAnchorElement | SVGAElement | undefined} */ (node);\n}\n\n/** @param {HTMLAnchorElement | SVGAElement} node */\nexport function get_href(node) {\n\treturn node instanceof SVGAElement\n\t\t? new URL(node.href.baseVal, document.baseURI)\n\t\t: new URL(node.href);\n}\n\n/** @param {any} value */\nexport function notifiable_store(value) {\n\tconst store = writable(value);\n\tlet ready = true;\n\n\tfunction notify() {\n\t\tready = true;\n\t\tstore.update((val) => val);\n\t}\n\n\t/** @param {any} new_value */\n\tfunction set(new_value) {\n\t\tready = false;\n\t\tstore.set(new_value);\n\t}\n\n\t/** @param {(value: any) => void} run */\n\tfunction subscribe(run) {\n\t\t/** @type {any} */\n\t\tlet old_value;\n\t\treturn store.subscribe((new_value) => {\n\t\t\tif (old_value === undefined || (ready && new_value !== old_value)) {\n\t\t\t\trun((old_value = new_value));\n\t\t\t}\n\t\t});\n\t}\n\n\treturn { notify, set, subscribe };\n}\n\nexport function create_updated_store() {\n\tconst { set, subscribe } = writable(false);\n\n\tconst interval = __SVELTEKIT_APP_VERSION_POLL_INTERVAL__;\n\n\t/** @type {NodeJS.Timeout} */\n\tlet timeout;\n\n\tasync function check() {\n\t\tif (import.meta.env.DEV || import.meta.env.SSR) return false;\n\n\t\tclearTimeout(timeout);\n\n\t\tif (interval) timeout = setTimeout(check, interval);\n\n\t\tconst res = await fetch(`${assets}/${__SVELTEKIT_APP_VERSION_FILE__}`, {\n\t\t\theaders: {\n\t\t\t\tpragma: 'no-cache',\n\t\t\t\t'cache-control': 'no-cache'\n\t\t\t}\n\t\t});\n\n\t\tif (res.ok) {\n\t\t\tconst { version } = await res.json();\n\t\t\tconst updated = version !== __SVELTEKIT_APP_VERSION__;\n\n\t\t\tif (updated) {\n\t\t\t\tset(true);\n\t\t\t\tclearTimeout(timeout);\n\t\t\t}\n\n\t\t\treturn updated;\n\t\t} else {\n\t\t\tthrow new Error(`Version check failed: ${res.status}`);\n\t\t}\n\t}\n\n\tif (interval) timeout = setTimeout(check, interval);\n\n\treturn {\n\t\tsubscribe,\n\t\tcheck\n\t};\n}\n","import { writable } from 'svelte/store';\nimport { create_updated_store, notifiable_store } from './utils.js';\n\n/** @type {import('./types').Client} */\nexport let client;\n\n/**\n * @param {{\n *   client: import('./types').Client;\n * }} opts\n */\nexport function init(opts) {\n\tclient = opts.client;\n}\n\nexport const stores = {\n\turl: notifiable_store({}),\n\tpage: notifiable_store({}),\n\tnavigating: writable(/** @type {import('types').Navigation | null} */ (null)),\n\tupdated: create_updated_store()\n};\n"],"names":["base","assets","set_paths","paths","get_base_uri","doc","baseURI","baseTags","scroll_state","find_anchor","event","e","get_href","node","notifiable_store","value","store","writable","ready","notify","val","set","new_value","subscribe","run","old_value","create_updated_store","timeout","check","res","version","updated","init","opts","stores"],"mappings":"wCACO,IAAIA,EAAO,GAGPC,EAAS,GAGb,SAASC,EAAUC,EAAO,CAChCH,EAAOG,EAAM,KACbF,EAASE,EAAM,QAAUH,CAC1B,CCJO,SAASI,EAAaC,EAAK,CACjC,IAAIC,EAAUD,EAAI,QAElB,GAAI,CAACC,EAAS,CACb,MAAMC,EAAWF,EAAI,qBAAqB,MAAM,EAChDC,EAAUC,EAAS,OAASA,EAAS,GAAG,KAAOF,EAAI,GACnD,CAED,OAAOC,CACR,CAEO,SAASE,GAAe,CAC9B,MAAO,CACN,EAAG,YACH,EAAG,WACL,CACA,CAGO,SAASC,EAAYC,EAAO,CAIlC,OAHaA,EACX,aAAc,EACd,KAAMC,GAAMA,aAAa,MAAQA,EAAE,SAAS,gBAAkB,GAAG,CAEpE,CAGO,SAASC,EAASC,EAAM,CAC9B,OAAOA,aAAgB,YACpB,IAAI,IAAIA,EAAK,KAAK,QAAS,SAAS,OAAO,EAC3C,IAAI,IAAIA,EAAK,IAAI,CACrB,CAGO,SAASC,EAAiBC,EAAO,CACvC,MAAMC,EAAQC,EAASF,CAAK,EAC5B,IAAIG,EAAQ,GAEZ,SAASC,GAAS,CACjBD,EAAQ,GACRF,EAAM,OAAQI,GAAQA,CAAG,CACzB,CAGD,SAASC,EAAIC,EAAW,CACvBJ,EAAQ,GACRF,EAAM,IAAIM,CAAS,CACnB,CAGD,SAASC,EAAUC,EAAK,CAEvB,IAAIC,EACJ,OAAOT,EAAM,UAAWM,GAAc,EACjCG,IAAc,QAAcP,GAASI,IAAcG,IACtDD,EAAKC,EAAYH,EAErB,CAAG,CACD,CAED,MAAO,CAAE,OAAAH,EAAQ,IAAAE,EAAK,UAAAE,EACvB,CAEO,SAASG,GAAuB,CACtC,KAAM,CAAE,IAAAL,EAAK,UAAAE,CAAW,EAAGN,EAAS,EAAK,EAKzC,IAAIU,EAEJ,eAAeC,GAAQ,CAGtB,aAAaD,CAAO,EAIpB,MAAME,EAAM,MAAM,MAAM,GAAG5B,uBAA4C,CACtE,QAAS,CACR,OAAQ,WACR,gBAAiB,UACjB,CACJ,CAAG,EAED,GAAI4B,EAAI,GAAI,CACX,KAAM,CAAE,QAAAC,CAAS,EAAG,MAAMD,EAAI,KAAI,EAC5BE,EAAUD,IAAY,gBAE5B,OAAIC,IACHV,EAAI,EAAI,EACR,aAAaM,CAAO,GAGdI,CACV,KACG,OAAM,IAAI,MAAM,yBAAyBF,EAAI,QAAQ,CAEtD,CAID,MAAO,CACN,UAAAN,EACA,MAAAK,CACF,CACA,CCrGO,SAASI,EAAKC,EAAM,CACjBA,EAAK,MACf,CAEY,MAACC,EAAS,CACrB,IAAKpB,EAAiB,EAAE,EACxB,KAAMA,EAAiB,EAAE,EACzB,WAAYG,EAA2D,IAAM,EAC7E,QAASS,EAAsB,CAChC"}