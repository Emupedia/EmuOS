import{v as V}from"./variables-055bf2ca.js";import{w as b}from"./index-d050104e.js";const U=5e3,D=3,A=100,B=e=>new Promise(t=>setTimeout(()=>t(),e)),_=async(e,t={},i)=>{let o=null,n;if(typeof AbortController=="function"){const{timeout:a=U}=t,r=new AbortController;o=setTimeout(()=>r.abort(),a),typeof i=="function"?n=await i(e,{...t,signal:r.signal}):n=await fetch(e,{...t,signal:r.signal})}else typeof i=="function"?n=await i(e,t):n=await fetch(e,t);return o!==null&&clearTimeout(o),n},S=async(e,t={},i,o=D)=>{try{return await _(e,t,i)}catch(n){if(console.error(n),o===1)throw n;return await B(A),S(e,t,i,o-1)}},F=(e,t)=>S(V.DEV?"https://emuos.emupedia.net/emuos/version.json":"/emuos/version.json",t,e);var w={};(function(e){e.defaults={},e.set=function(t,i,o){var n=o||{},a=e.defaults,r=n.expires||a.expires,u=n.domain||a.domain,f=n.path!==void 0?n.path:a.path!==void 0?a.path:"/",c=n.secure!==void 0?n.secure:a.secure,d=n.httponly!==void 0?n.httponly:a.httponly,l=n.samesite!==void 0?n.samesite:a.samesite,s=r?new Date(typeof r=="number"?new Date().getTime()+r*864e5:r):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+i.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(s&&s.getTime()>=0?";expires="+s.toUTCString():"")+(u?";domain="+u:"")+(f?";path="+f:"")+(c?";secure":"")+(d?";httponly":"")+(l?";samesite="+l:"")},e.get=function(t){for(var i=document.cookie.split(";");i.length;){var o=i.pop(),n=o.indexOf("=");n=n<0?o.length:n;var a=decodeURIComponent(o.slice(0,n).replace(/^\s+/,""));if(a===t)return decodeURIComponent(o.slice(n+1))}return null},e.erase=function(t,i){e.set(t,"",{expires:-1,domain:i&&i.domain,path:i&&i.path,secure:0,httponly:0})},e.all=function(){for(var t={},i=document.cookie.split(";");i.length;){var o=i.pop(),n=o.indexOf("=");n=n<0?o.length:n;var a=decodeURIComponent(o.slice(0,n).replace(/^\s+/,""));t[a]=decodeURIComponent(o.slice(n+1))}return t}})(w);const j=e=>{var t;typeof process<"u"&&((t=process.env)==null||t.NODE_ENV)},v=e=>j(),O=e=>typeof e>"u"?"undefined":JSON.stringify(e),g=e=>{if(typeof e!="string")return e;if(e!=="undefined"){if(e!=null)try{return JSON.parse(e)}catch{}return e}};function G(e,t,i){const o=t.getValue(i);return o!==null&&e.set(o),t.addListener&&t.addListener(i,n=>e.set(n)),e.subscribe(n=>t.setValue(i,n)),{...e,delete(){t.deleteValue(i)}}}J();E();I();function C(e,t=!1){const i=[],o=r=>{const u=r.key;r.storageArea===e&&i.filter(({key:f})=>f===u).forEach(({listener:f})=>f(g(r.newValue)))},n=()=>{t&&typeof window<"u"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",o)},a=()=>{t&&typeof window<"u"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",o)};return{addListener(r,u){i.push({key:r,listener:u}),i.length===1&&n()},removeListener(r,u){const f=i.indexOf({key:r,listener:u});f!==-1&&i.splice(f,1),i.length===0&&a()},getValue(r){const u=e.getItem(r);return g(u)},deleteValue(r){e.removeItem(r)},setValue(r,u){e.setItem(r,O(u))}}}function E(e=!1){return typeof window<"u"&&(window==null?void 0:window.localStorage)?C(window.localStorage,e):(v(),y())}function I(e=!1){return typeof window<"u"&&(window==null?void 0:window.sessionStorage)?C(window.sessionStorage,e):(v(),y())}function J(){return typeof document>"u"||typeof(document==null?void 0:document.cookie)!="string"?(v(),y()):{getValue(e){const t=w.get(e);return g(t)},deleteValue(e){w.erase(e,{samesite:"Strict"})},setValue(e,t){w.set(e,O(t),{samesite:"Strict"})}}}function y(){return{getValue(){return null},deleteValue(){},setValue(){}}}const M=`[{
	"name": "My Computer"
} , {
	"name": "Network Neighborhood"
} , {
	"name": "Recycle Bin"
} , {
	"name": "(C)",
	"shortcut": true
} , {
	"name": "Control Panel",
	"shortcut": true
} , {
	"name": "System",
	"shortcut": true
}]`;let R={};try{R=JSON.parse(M)}catch(e){console.error(e)}const T={locale:"en",desktop:{icons:R||[]},settings:{},version:0,user:null,dev:!1};var L;(L=V)!=null&&L.GLOBAL_DEBUG&&console.log(T);const P=G(b(T),E(),"db"),W=(()=>{const{subscribe:e,update:t}=b([]),i={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256},close:"\u2715"};let o=0;const n={};return{subscribe:e,open:(c,d={})=>{const l={target:"default",...c instanceof Object?c:{...d,msg:c}},s=n[l.target]||{},m={...i,...s,...l,theme:{...s.theme,...l.theme},classes:[...s.classes||[],...l.classes||[]],id:l.id||++o};return t(p=>{const h=p.findIndex(N=>N.id===l.id);return h===-1?m.reversed?[...p,m]:[m,...p]:(h>-1&&(p[h]={...p[h],...m}),p)}),o},close:c=>{t(d=>{if(!d.length||c===0)return[];if(c instanceof Object)return d.filter(s=>c(s));const l=c||Math.max(...d.map(s=>s.id));return d.filter(s=>s.id!==l)})},set:(c,d={})=>{const l=c instanceof Object?{...c}:{...d,id:c};t(s=>{const m=s.findIndex(p=>p.id===l.id);return m>-1&&(s[m]={...s[m],...l}),s})},init:(c="default",d={})=>(n[c]=d,n)}})();export{P as d,F as g,R as i,W as t};
//# sourceMappingURL=db-a8c3e8af.js.map
