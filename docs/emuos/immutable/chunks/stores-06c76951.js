import{w as L}from"./index-47084bf0.js";const T=5e3,C=3,U=100,A=e=>new Promise(t=>setTimeout(()=>t(),e)),N=async(e,t={},i)=>{let o=null,n;if(typeof AbortController=="function"){const{timeout:a=T}=t,r=new AbortController;o=setTimeout(()=>r.abort(),a),typeof i=="function"?n=await i(e,{...t,signal:r.signal}):n=await fetch(e,{...t,signal:r.signal})}else typeof i=="function"?n=await i(e,t):n=await fetch(e,t);return o!==null&&clearTimeout(o),n},S=async(e,t={},i,o=C)=>{try{return await N(e,t,i)}catch(n){if(console.error(n),o===1)throw n;return await A(U),S(e,t,i,o-1)}},F=(e,t)=>S("/emuos/version.json",t,e);var h={};(function(e){e.defaults={},e.set=function(t,i,o){var n=o||{},a=e.defaults,r=n.expires||a.expires,u=n.domain||a.domain,f=n.path!==void 0?n.path:a.path!==void 0?a.path:"/",l=n.secure!==void 0?n.secure:a.secure,d=n.httponly!==void 0?n.httponly:a.httponly,c=n.samesite!==void 0?n.samesite:a.samesite,s=r?new Date(typeof r=="number"?new Date().getTime()+r*864e5:r):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+i.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(s&&s.getTime()>=0?";expires="+s.toUTCString():"")+(u?";domain="+u:"")+(f?";path="+f:"")+(l?";secure":"")+(d?";httponly":"")+(c?";samesite="+c:"")},e.get=function(t){for(var i=document.cookie.split(";");i.length;){var o=i.pop(),n=o.indexOf("=");n=n<0?o.length:n;var a=decodeURIComponent(o.slice(0,n).replace(/^\s+/,""));if(a===t)return decodeURIComponent(o.slice(n+1))}return null},e.erase=function(t,i){e.set(t,"",{expires:-1,domain:i&&i.domain,path:i&&i.path,secure:0,httponly:0})},e.all=function(){for(var t={},i=document.cookie.split(";");i.length;){var o=i.pop(),n=o.indexOf("=");n=n<0?o.length:n;var a=decodeURIComponent(o.slice(0,n).replace(/^\s+/,""));t[a]=decodeURIComponent(o.slice(n+1))}return t}})(h);const b=[],D=e=>{var i;const t=typeof process<"u"&&((i=process.env)==null?void 0:i.NODE_ENV)==="production";b.indexOf(e)===-1&&!t&&(typeof window>"u"&&(e+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(e),b.push(e))},v=e=>{D(`Unable to find the ${e}. No data will be persisted.`)},V=e=>typeof e>"u"?"undefined":JSON.stringify(e),g=e=>{if(typeof e!="string")return e;if(e!=="undefined"){if(e!=null)try{return JSON.parse(e)}catch{}return e}};function I(e,t,i){const o=t.getValue(i);return o!==null&&e.set(o),t.addListener&&t.addListener(i,n=>{e.set(n)}),e.subscribe(n=>{t.setValue(i,n)}),{...e,delete(){t.deleteValue(i)}}}j();E();_();function O(e,t=!1){const i=[],o=r=>{const u=r.key;r.storageArea===e&&i.filter(({key:f})=>f===u).forEach(({listener:f})=>{f(g(r.newValue))})},n=()=>{t&&typeof window<"u"&&(window==null?void 0:window.addEventListener)&&window.addEventListener("storage",o)},a=()=>{t&&typeof window<"u"&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("storage",o)};return{addListener(r,u){i.push({key:r,listener:u}),i.length===1&&n()},removeListener(r,u){const f=i.indexOf({key:r,listener:u});f!==-1&&i.splice(f,1),i.length===0&&a()},getValue(r){const u=e.getItem(r);return g(u)},deleteValue(r){e.removeItem(r)},setValue(r,u){e.setItem(r,V(u))}}}function E(e=!1){return typeof window<"u"&&(window==null?void 0:window.localStorage)?O(window.localStorage,e):(v("window.localStorage"),y())}function _(e=!1){return typeof window<"u"&&(window==null?void 0:window.sessionStorage)?O(window.sessionStorage,e):(v("window.sessionStorage"),y())}function j(){return typeof document>"u"||typeof(document==null?void 0:document.cookie)!="string"?(v("document.cookies"),y()):{getValue(e){const t=h.get(e);return g(t)},deleteValue(e){h.erase(e,{samesite:"Strict"})},setValue(e,t){h.set(e,V(t),{samesite:"Strict"})}}}function y(){return{getValue(){return null},deleteValue(){},setValue(){}}}const G=I(L({locale:"en",settings:{},version:0,user:null,dev:!1}),E(),"db"),M=(()=>{const{subscribe:e,update:t}=L([]),i={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256},close:"\u2715"};let o=0;const n={};return{subscribe:e,open:(l,d={})=>{const c={target:"default",...l instanceof Object?l:{...d,msg:l}},s=n[c.target]||{},p={...i,...s,...c,theme:{...s.theme,...c.theme},classes:[...s.classes||[],...c.classes||[]],id:c.id||++o};return t(w=>{const m=w.findIndex(R=>R.id===c.id);return m===-1?p.reversed?[...w,p]:[p,...w]:(m>-1&&(w[m]={...w[m],...p}),w)}),o},close:l=>{t(d=>{if(!d.length||l===0)return[];if(l instanceof Object)return d.filter(s=>l(s));const c=l||Math.max(...d.map(s=>s.id));return d.filter(s=>s.id!==c)})},set:(l,d={})=>{const c=l instanceof Object?{...l}:{...d,id:l};t(s=>{const p=s.findIndex(w=>w.id===c.id);return p>-1&&(s[p]={...s[p],...c}),s})},init:(l="default",d={})=>(n[l]=d,n)}})();export{G as d,F as g,M as t};
